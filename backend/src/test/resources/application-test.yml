# Configuration Spring Boot pour les tests
# Les valeurs de connexion PostgreSQL et Redis sont surchargées dynamiquement
# par Testcontainers via @DynamicPropertySource

spring:
  # Configuration JPA pour les tests
  jpa:
    hibernate:
      ddl-auto: create-drop  # Recrée le schéma à chaque test
    show-sql: true           # Affiche les requêtes SQL dans les logs
    properties:
      hibernate:
        format_sql: true
        use_sql_comments: true

  # Liquibase désactivé en test (ddl-auto=create-drop le remplace)
  liquibase:
    enabled: false

  # Cache désactivé pour les tests (comportement prévisible)
  cache:
    type: none

  # Mail en mode mock pour les tests
  mail:
    host: localhost
    port: 3025

  # Logging
logging:
  level:
    com.eplatform: DEBUG
    org.springframework.web: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

# Désactiver les métriques Actuator en test
management:
  metrics:
    enable:
      all: false
